<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Î— Î“Î¬Ï„Î± Ï„Î¿Ï… SchrÃ¶dinger - ÎšÏÏ…Ï†Î® ÎšÎ¬Î¼ÎµÏÎ±</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #0a0a0a;
            color: white;
            text-align: center;
        }
        .container {
            background: #1a1a1a;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
        }
        h1 {
            color: #ff6b6b;
            margin-bottom: 10px;
        }
        .status {
            font-size: 24px;
            margin: 20px 0;
            padding: 15px;
            border-radius: 8px;
            transition: all 0.3s;
        }
        .superposition {
            background-color: #4ecdc4;
            color: white;
        }
        .collapsed {
            background-color: #ff6b6b;
            color: white;
        }
        .cat-image {
            width: 400px;
            height: 400px;
            margin: 20px auto;
            border: 4px solid #444;
            border-radius: 10px;
            object-fit: cover;
            transition: all 0.3s;
        }
        .button {
            background-color: #4ecdc4;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
            margin: 10px;
            transition: all 0.3s;
        }
        .button:hover {
            background-color: #45b7af;
            transform: scale(1.05);
        }
        .restart {
            background-color: #ff6b6b;
        }
        .restart:hover {
            background-color: #e55a5a;
        }
        .explanation {
            background-color: #2d2d2d;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: left;
        }
        .hidden-camera {
            position: absolute;
            opacity: 0;
            width: 1px;
            height: 1px;
            pointer-events: none;
        }
        .instructions {
            background-color: #2d2d2d;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #4ecdc4;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Î— Î“Î¬Ï„Î± Ï„Î¿Ï… SchrÃ¶dinger</h1>
        <p><em>Î— ÎºÎ²Î±Î½Ï„Î¹ÎºÎ® Ï…Ï€Î­ÏÎ¸ÎµÏƒÎ· ÎºÎ±Ï„Î±ÏÏÎ­ÎµÎ¹ Î¼Îµ Ï„Î·Î½ Ï€Î±ÏÎ±Ï„Î®ÏÎ·ÏƒÎ·</em></p>

        <div class="instructions">
            <p>ğŸ”¹ <strong>ÎšÎ¬Î»Ï…ÏˆÎµ Ï„Î·Î½ ÎºÎ¬Î¼ÎµÏÎ±</strong> - ÎŸÎ¹ ÎµÎ¹ÎºÏŒÎ½ÎµÏ‚ ÎµÎ½Î±Î»Î»Î¬ÏƒÏƒÎ¿Î½Ï„Î±Î¹ (Ï…Ï€Î­ÏÎ¸ÎµÏƒÎ·)</p>
            <p>ğŸ”¹ <strong>Î¦ÏÏ„Î¹ÏƒÎµ Ï„Î·Î½ ÎºÎ¬Î¼ÎµÏÎ±</strong> - Î— ÎµÎ½Î±Î»Î»Î±Î³Î® ÏƒÏ„Î±Î¼Î±Ï„Î¬ (Ï€Î±ÏÎ±Ï„Î®ÏÎ·ÏƒÎ·)</p>
            <p>ğŸ”¹ <strong>Î Î¬Ï„Î± "Î•Ï€Î±Î½ÎµÎºÎºÎ¯Î½Î·ÏƒÎ·"</strong> - Î“Î¹Î± Î½Î­Î± Ï…Ï€Î­ÏÎ¸ÎµÏƒÎ·</p>
        </div>

        <div id="status" class="status superposition">
            ğŸ”¬ ÎšÎ’Î‘ÎÎ¤Î™ÎšÎ— Î¥Î Î•Î¡Î˜Î•Î£Î—: Î— Î³Î¬Ï„Î± ÎµÎ¯Î½Î±Î¹ Î–Î©ÎÎ¤Î‘ÎÎ— ÎºÎ±Î¹ ÎÎ•ÎšÎ¡Î— Ï„Î±Ï…Ï„ÏŒÏ‡ÏÎ¿Î½Î±!
        </div>

        <img id="catImage" class="cat-image" src="A-CAT.png" alt="Î— Î³Î¬Ï„Î± Ï„Î¿Ï… SchrÃ¶dinger">

        <!-- ÎšÎ¡Î¥Î¦Î— ÎšÎ‘ÎœÎ•Î¡Î‘ -->
        <div class="hidden-camera">
            <video id="cameraVideo" autoplay playsinline></video>
            <canvas id="lightCanvas"></canvas>
        </div>

        <div>
            <button class="button" onclick="startExperiment()">Î•ÎÎ‘Î¡ÎÎ— Î Î•Î™Î¡Î‘ÎœÎ‘Î¤ÎŸÎ£</button>
            <button class="button restart" onclick="restartExperiment()" id="restartBtn" disabled>Î•Î Î‘ÎÎ•ÎšÎšÎ™ÎÎ—Î£Î—</button>
        </div>

        <div class="explanation">
            <p><strong>Î— Ï†Ï…ÏƒÎ¹ÎºÎ® Ï„Î¿Ï… Ï€ÎµÎ¹ÏÎ¬Î¼Î±Ï„Î¿Ï‚:</strong></p>
            <p>ÎŒÏ„Î±Î½ Î· ÎºÎ¬Î¼ÎµÏÎ± Î´ÎµÎ½ Î±Î½Î¹Ï‡Î½ÎµÏÎµÎ¹ Ï†Ï‰Ï‚ (ÎºÎ¬Î¼ÎµÏÎ± ÎºÎ±Î»Ï…Î¼Î¼Î­Î½Î·), Ï„Î¿ ÏƒÏÏƒÏ„Î·Î¼Î± Î²ÏÎ¯ÏƒÎºÎµÏ„Î±Î¹ ÏƒÎµ ÎºÎ²Î±Î½Ï„Î¹ÎºÎ® Ï…Ï€Î­ÏÎ¸ÎµÏƒÎ· - Î· Î³Î¬Ï„Î± ÎµÎ¯Î½Î±Î¹ Ï„Î±Ï…Ï„ÏŒÏ‡ÏÎ¿Î½Î± Î¶Ï‰Î½Ï„Î±Î½Î® ÎšÎ‘Î™ Î½ÎµÎºÏÎ®. ÎœÏŒÎ»Î¹Ï‚ Î±Î½Î¹Ï‡Î½ÎµÏ…Ï„ÎµÎ¯ Ï†Ï‰Ï‚ (Ï€Î±ÏÎ±Ï„Î®ÏÎ·ÏƒÎ·), Î· Ï…Ï€Î­ÏÎ¸ÎµÏƒÎ· ÎºÎ±Ï„Î±ÏÏÎ­ÎµÎ¹ ÎºÎ±Î¹ Î· Î³Î¬Ï„Î± "ÎµÏ€Î¹Î»Î­Î³ÎµÎ¹" Î¼Î¹Î± ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·.</p>
        </div>
    </div>

    <script>
        let cameraStream = null;
        let imageInterval = null;
        let isExperimentRunning = false;
        let superpositionActive = true;

        const catImage = document.getElementById('catImage');
        const statusElement = document.getElementById('status');
        const restartBtn = document.getElementById('restartBtn');
        const cameraVideo = document.getElementById('cameraVideo');
        const lightCanvas = document.getElementById('lightCanvas');

        // ÎˆÎ½Î±ÏÎ¾Î· Ï€ÎµÎ¹ÏÎ¬Î¼Î±Ï„Î¿Ï‚
        async function startExperiment() {
            if (isExperimentRunning) return;

            try {
                // Î‘Î¯Ï„Î·Î¼Î± Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ·Ï‚ ÏƒÏ„Î·Î½ ÎºÎ¬Î¼ÎµÏÎ±
                cameraStream = await navigator.mediaDevices.getUserMedia({ 
                    video: { facingMode: 'environment' } 
                });
                cameraVideo.srcObject = cameraStream;
                isExperimentRunning = true;

                // ÎˆÎ½Î±ÏÎ¾Î· ÎµÎ½Î±Î»Î»Î±Î³Î®Ï‚ ÎµÎ¹ÎºÏŒÎ½Ï‰Î½
                startSuperposition();
                
                // ÎˆÎ½Î±ÏÎ¾Î· Ï€Î±ÏÎ±ÎºÎ¿Î»Î¿ÏÎ¸Î·ÏƒÎ·Ï‚ Ï†Ï‰Ï„ÏŒÏ‚
                startLightMonitoring();

            } catch (error) {
                alert('Î£Ï†Î¬Î»Î¼Î± Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ·Ï‚ ÏƒÏ„Î·Î½ ÎºÎ¬Î¼ÎµÏÎ±: ' + error.message);
            }
        }

        // ÎˆÎ½Î±ÏÎ¾Î· ÎºÎ²Î±Î½Ï„Î¹ÎºÎ®Ï‚ Ï…Ï€Î­ÏÎ¸ÎµÏƒÎ·Ï‚ (ÎµÎ½Î±Î»Î»Î±Î³Î® ÎµÎ¹ÎºÏŒÎ½Ï‰Î½)
        function startSuperposition() {
            if (imageInterval) {
                clearInterval(imageInterval);
            }
            
            // Î“ÏÎ®Î³Î¿ÏÎ· ÎµÎ½Î±Î»Î»Î±Î³Î® ÎµÎ¹ÎºÏŒÎ½Ï‰Î½
            imageInterval = setInterval(() => {
                if (catImage.src.includes('A-CAT.png')) {
                    catImage.src = 'D-CAT.png';
                } else {
                    catImage.src = 'A-CAT.png';
                }
            }, 300); // Î‘Î»Î»Î±Î³Î® ÎºÎ¬Î¸Îµ 300ms
            
            superpositionActive = true;
            updateStatus(true);
            restartBtn.disabled = true;
        }

        // Î£Ï„Î±Î¼Î¬Ï„Î·Î¼Î± Ï…Ï€Î­ÏÎ¸ÎµÏƒÎ·Ï‚ (ÎºÎ±Ï„Î¬ÏÏÎµÏ…ÏƒÎ·)
        function stopSuperposition() {
            if (imageInterval) {
                clearInterval(imageInterval);
                imageInterval = null;
            }
            
            superpositionActive = false;
            updateStatus(false);
            restartBtn.disabled = false;
        }

        // Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚
        function updateStatus(inSuperposition) {
            if (inSuperposition) {
                statusElement.textContent = 'ğŸ”¬ ÎšÎ’Î‘ÎÎ¤Î™ÎšÎ— Î¥Î Î•Î¡Î˜Î•Î£Î—: Î— Î³Î¬Ï„Î± ÎµÎ¯Î½Î±Î¹ Î–Î©ÎÎ¤Î‘ÎÎ— ÎºÎ±Î¹ ÎÎ•ÎšÎ¡Î— Ï„Î±Ï…Ï„ÏŒÏ‡ÏÎ¿Î½Î±!';
                statusElement.className = 'status superposition';
            } else {
                const state = catImage.src.includes('A-CAT.png') ? 'Î–Î©ÎÎ¤Î‘ÎÎ—' : 'ÎÎ•ÎšÎ¡Î—';
                statusElement.textContent = `ğŸ” Î Î‘Î¡Î‘Î¤Î—Î¡Î—Î£Î—: Î— Î³Î¬Ï„Î± ÎµÎ¯Î½Î±Î¹ ${state}! (Î¥Ï€Î­ÏÎ¸ÎµÏƒÎ· ÎºÎ±Ï„ÎµÏƒÏ„ÏÎ±Î¼Î¼Î­Î½Î·)`;
                statusElement.className = 'status collapsed';
            }
        }

        // Î Î±ÏÎ±ÎºÎ¿Î»Î¿ÏÎ¸Î·ÏƒÎ· Ï†Ï‰Ï„ÏŒÏ‚
        function startLightMonitoring() {
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            let lastLightState = false;

            function checkLight() {
                if (!isExperimentRunning) return;

                try {
                    canvas.width = cameraVideo.videoWidth;
                    canvas.height = cameraVideo.videoHeight;
                    context.drawImage(cameraVideo, 0, 0, canvas.width, canvas.height);
                    
                    const imageData = context.getImageData(0, 0, canvas.width, canvas.height);
                    const data = imageData.data;
                    
                    let totalBrightness = 0;
                    for (let i = 0; i < data.length; i += 4) {
                        const brightness = (data[i] + data[i + 1] + data[i + 2]) / 3;
                        totalBrightness += brightness;
                    }
                    
                    const averageBrightness = totalBrightness / (data.length / 4);
                    const lightDetected = averageBrightness > 50; // Î§Î±Î¼Î·Î»ÏŒ threshold
                    
                    // Î‘Î½ Î±Î½Î¹Ï‡Î½ÎµÏÏ„Î·ÎºÎµ Ï†Ï‰Ï‚ ÎºÎ±Î¹ ÎµÎ¯Î¼Î±ÏƒÏ„Îµ ÏƒÎµ Ï…Ï€Î­ÏÎ¸ÎµÏƒÎ·, ÏƒÏ„Î±Î¼Î¬Ï„Î±
                    if (lightDetected && superpositionActive) {
                        stopSuperposition();
                    }
                    
                    // Î‘Î½Î±Î½Î­Ï‰ÏƒÎ· Î±Î½Î¯Ï‡Î½ÎµÏ…ÏƒÎ·Ï‚
                    setTimeout(checkLight, 200);
                    
                } catch (e) {
                    // Î•Î¬Î½ Ï…Ï€Î¬ÏÎ¾ÎµÎ¹ ÏƒÏ†Î¬Î»Î¼Î±, ÏƒÏ…Î½Î­Ï‡Î¹ÏƒÎ·
                    setTimeout(checkLight, 500);
                }
            }
            
            // Î‘ÏÏ‡Î¹ÎºÎ® Î­Î½Î±ÏÎ¾Î·
            setTimeout(checkLight, 1000);
        }

        // Î•Ï€Î±Î½ÎµÎºÎºÎ¯Î½Î·ÏƒÎ· Ï€ÎµÎ¹ÏÎ¬Î¼Î±Ï„Î¿Ï‚
        function restartExperiment() {
            if (isExperimentRunning) {
                startSuperposition();
            }
        }

        // ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚ ÎºÎ±Ï„Î¬ Ï„Î¿ ÎºÎ»ÎµÎ¯ÏƒÎ¹Î¼Î¿
        window.addEventListener('beforeunload', () => {
            if (cameraStream) {
                cameraStream.getTracks().forEach(track => track.stop());
            }
            if (imageInterval) {
                clearInterval(imageInterval);
            }
        });
    </script>
</body>
</html>