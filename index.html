<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Î— Î“Î¬Ï„Î± Ï„Î¿Ï… SchrÃ¶dinger - Î Î¹ÏƒÏ„Î® ÎˆÎºÎ´Î¿ÏƒÎ·</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #0a0a0a;
            color: white;
            text-align: center;
        }
        .container {
            background: #1a1a1a;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
        }
        h1 {
            color: #ff6b6b;
            margin-bottom: 10px;
        }
        .status {
            font-size: 24px;
            margin: 20px 0;
            padding: 15px;
            border-radius: 8px;
            transition: all 0.3s;
        }
        .superposition {
            background-color: #4ecdc4;
            color: white;
        }
        .collapsed {
            background-color: #ff6b6b;
            color: white;
        }
        .cat-image {
            width: 400px;
            height: 400px;
            margin: 20px auto;
            border: 4px solid #444;
            border-radius: 10px;
            object-fit: cover;
            transition: all 0.3s;
        }
        .button {
            background-color: #4ecdc4;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
            margin: 10px;
            transition: all 0.3s;
        }
        .button:hover {
            background-color: #45b7af;
            transform: scale(1.05);
        }
        .restart {
            background-color: #ff6b6b;
        }
        .restart:hover {
            background-color: #e55a5a;
        }
        .explanation {
            background-color: #2d2d2d;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: left;
        }
        .hidden-camera {
            position: absolute;
            opacity: 0;
            width: 1px;
            height: 1px;
            pointer-events: none;
        }
        .instructions {
            background-color: #2d2d2d;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #4ecdc4;
        }
        .light-level {
            margin: 10px 0;
            font-size: 14px;
            color: #aaa;
        }
        .progress-bar {
            width: 100%;
            height: 10px;
            background-color: #333;
            border-radius: 5px;
            margin: 10px 0;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background-color: #4ecdc4;
            width: 0%;
            transition: width 0.3s;
        }
        .final-state {
            border: 4px solid #ff6b6b;
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.5);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Î— Î“Î¬Ï„Î± Ï„Î¿Ï… SchrÃ¶dinger</h1>
        <p><em>ÎœÏŒÎ»Î¹Ï‚ Ï€Î±ÏÎ±Ï„Î·ÏÎ·Î¸ÎµÎ¯, Î· ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· Ï„Î·Ï‚ Î³Î¬Ï„Î±Ï‚ Î¿ÏÎ¹ÏƒÏ„Î¹ÎºÎ¿Ï€Î¿Î¹ÎµÎ¯Ï„Î±Î¹ Î³Î¹Î± Ï€Î¬Î½Ï„Î±</em></p>

        <div class="instructions">
            <p>ğŸ”¹ <strong>Î£ÎºÎ¿Ï„Î¬Î´Î¹:</strong> Î— Î³Î¬Ï„Î± ÎµÎ¯Î½Î±Î¹ ÏƒÎµ Ï…Ï€Î­ÏÎ¸ÎµÏƒÎ· (ÎµÎ½Î±Î»Î»Î±Î³Î® ÎµÎ¹ÎºÏŒÎ½Ï‰Î½)</p>
            <p>ğŸ”¹ <strong>Î¦Ï‰Ï‚:</strong> Î— Ï…Ï€Î­ÏÎ¸ÎµÏƒÎ· ÎºÎ±Ï„Î±ÏÏÎ­ÎµÎ¹ - Î· Î³Î¬Ï„Î± "ÎµÏ€Î¹Î»Î­Î³ÎµÎ¹" Î¼Î¹Î± Î¼ÏŒÎ½Î¹Î¼Î· ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·</p>
            <p>ğŸ”¹ <strong>Î•Ï€Î±Î½ÎµÎºÎºÎ¯Î½Î·ÏƒÎ·:</strong> ÎœÏŒÎ½Î¿ Î­Ï„ÏƒÎ¹ Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î±Î»Î»Î¬Î¾ÎµÎ¹ Î· ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·</p>
        </div>

        <div id="status" class="status">
            ğŸ¬ Î Î‘Î¤Î—Î£Î• "Î•ÎÎ‘Î¡ÎÎ—" Î“Î™Î‘ ÎÎ‘ ÎÎ•ÎšÎ™ÎÎ—Î£Î•Î™ Î¤ÎŸ Î Î•Î™Î¡Î‘ÎœÎ‘
        </div>

        <img id="catImage" class="cat-image" src="A-CAT.png" alt="Î— Î³Î¬Ï„Î± Ï„Î¿Ï… SchrÃ¶dinger">

        <div class="light-level">
            Î•Ï€Î¯Ï€ÎµÎ´Î¿ Ï†Ï‰Ï„ÏŒÏ‚: <span id="lightValue">0</span>%
            <div class="progress-bar">
                <div id="lightProgress" class="progress-fill"></div>
            </div>
        </div>

        <!-- ÎšÎ¡Î¥Î¦Î— ÎšÎ‘ÎœÎ•Î¡Î‘ -->
        <div class="hidden-camera">
            <video id="cameraVideo" autoplay playsinline></video>
            <canvas id="lightCanvas"></canvas>
        </div>

        <div>
            <button class="button" onclick="startExperiment()" id="startBtn">Î•ÎÎ‘Î¡ÎÎ— Î Î•Î™Î¡Î‘ÎœÎ‘Î¤ÎŸÎ£</button>
            <button class="button restart" onclick="restartExperiment()" id="restartBtn" disabled>Î•Î Î‘ÎÎ•ÎšÎšÎ™ÎÎ—Î£Î—</button>
        </div>

        <div class="explanation">
            <p><strong>Î— Ï†Î¹Î»Î¿ÏƒÎ¿Ï†Î¯Î± Ï„Î¿Ï… Ï€ÎµÎ¹ÏÎ¬Î¼Î±Ï„Î¿Ï‚:</strong></p>
            <p>Î£Ï„Î·Î½ Ï€ÏÎ±Î³Î¼Î±Ï„Î¹ÎºÎ® Ï†Ï…ÏƒÎ¹ÎºÎ®, Î¼ÏŒÎ»Î¹Ï‚ Î³Î¯Î½ÎµÎ¹ Î· Ï€ÏÏÏ„Î· Ï€Î±ÏÎ±Ï„Î®ÏÎ·ÏƒÎ· ÎºÎ±Î¹ Î· ÎºÎ²Î±Î½Ï„Î¹ÎºÎ® Ï…Ï€Î­ÏÎ¸ÎµÏƒÎ· ÎºÎ±Ï„Î±ÏÏÎµÏÏƒÎµÎ¹, Ï„Î¿ ÏƒÏÏƒÏ„Î·Î¼Î± Ï€Î±ÏÎ±Î¼Î­Î½ÎµÎ¹ ÏƒÏ„Î·Î½ Î¯Î´Î¹Î± ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· Î³Î¹Î± Ï€Î¬Î½Ï„Î±. Î— Î³Î¬Ï„Î± Î´ÎµÎ½ ÎµÏ€Î¹ÏƒÏ„ÏÎ­Ï†ÎµÎ¹ ÏƒÎµ Ï…Ï€Î­ÏÎ¸ÎµÏƒÎ· - Î¼Î­Î½ÎµÎ¹ Î¶Ï‰Î½Ï„Î±Î½Î® Î‰ Î½ÎµÎºÏÎ®. ÎœÏŒÎ½Î¿ Î¼Îµ ÎµÏ€Î±Î½ÎµÎºÎºÎ¯Î½Î·ÏƒÎ· Ï„Î¿Ï… Ï€ÎµÎ¹ÏÎ¬Î¼Î±Ï„Î¿Ï‚ (Î½Î­Î± Î³Î¬Ï„Î±) Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î±Î»Î»Î¬Î¾ÎµÎ¹ Î±Ï…Ï„ÏŒ.</p>
        </div>
    </div>

    <script>
        let cameraStream = null;
        let imageInterval = null;
        let isExperimentRunning = false;
        let superpositionActive = false;
        let finalStateDetermined = false;
        let catIsAlive = true; // Î ÏÎ¿ÎµÏ€Î¹Î»ÎµÎ³Î¼Î­Î½Î· ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·

        const catImage = document.getElementById('catImage');
        const statusElement = document.getElementById('status');
        const restartBtn = document.getElementById('restartBtn');
        const startBtn = document.getElementById('startBtn');
        const cameraVideo = document.getElementById('cameraVideo');
        const lightValue = document.getElementById('lightValue');
        const lightProgress = document.getElementById('lightProgress');

        // ÎˆÎ½Î±ÏÎ¾Î· Ï€ÎµÎ¹ÏÎ¬Î¼Î±Ï„Î¿Ï‚
        async function startExperiment() {
            if (isExperimentRunning) return;

            try {
                // Î‘Î¯Ï„Î·Î¼Î± Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ·Ï‚ ÏƒÏ„Î·Î½ ÎºÎ¬Î¼ÎµÏÎ±
                cameraStream = await navigator.mediaDevices.getUserMedia({ 
                    video: { facingMode: 'environment' } 
                });
                cameraVideo.srcObject = cameraStream;
                isExperimentRunning = true;
                finalStateDetermined = false;
                startBtn.disabled = true;
                startBtn.textContent = 'Î Î•Î™Î¡Î‘ÎœÎ‘ Î£Î• Î•ÎÎ•Î›Î™ÎÎ—...';

                // ÎˆÎ½Î±ÏÎ¾Î· ÎµÎ½Î±Î»Î»Î±Î³Î®Ï‚ ÎµÎ¹ÎºÏŒÎ½Ï‰Î½
                startSuperposition();
                
                // ÎˆÎ½Î±ÏÎ¾Î· Ï€Î±ÏÎ±ÎºÎ¿Î»Î¿ÏÎ¸Î·ÏƒÎ·Ï‚ Ï†Ï‰Ï„ÏŒÏ‚
                startLightMonitoring();

            } catch (error) {
                alert('Î£Ï†Î¬Î»Î¼Î± Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ·Ï‚ ÏƒÏ„Î·Î½ ÎºÎ¬Î¼ÎµÏÎ±: ' + error.message);
                startBtn.disabled = false;
                startBtn.textContent = 'Î•ÎÎ‘Î¡ÎÎ— Î Î•Î™Î¡Î‘ÎœÎ‘Î¤ÎŸÎ£';
            }
        }

        // ÎˆÎ½Î±ÏÎ¾Î· ÎºÎ²Î±Î½Ï„Î¹ÎºÎ®Ï‚ Ï…Ï€Î­ÏÎ¸ÎµÏƒÎ·Ï‚ (ÎµÎ½Î±Î»Î»Î±Î³Î® ÎµÎ¹ÎºÏŒÎ½Ï‰Î½)
        function startSuperposition() {
            if (imageInterval) {
                clearInterval(imageInterval);
            }
            
            // ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚ Ï„ÎµÎ»Î¹ÎºÎ®Ï‚ ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚
            catImage.classList.remove('final-state');
            finalStateDetermined = false;
            superpositionActive = true;
            
            // Î“ÏÎ®Î³Î¿ÏÎ· ÎµÎ½Î±Î»Î»Î±Î³Î® ÎµÎ¹ÎºÏŒÎ½Ï‰Î½
            imageInterval = setInterval(() => {
                if (catImage.src.includes('A-CAT.png')) {
                    catImage.src = 'D-CAT.png';
                } else {
                    catImage.src = 'A-CAT.png';
                }
            }, 400);
            
            updateStatus(true);
            restartBtn.disabled = true;
        }

        // Î£Ï„Î±Î¼Î¬Ï„Î·Î¼Î± Ï…Ï€Î­ÏÎ¸ÎµÏƒÎ·Ï‚ (ÎºÎ±Ï„Î¬ÏÏÎµÏ…ÏƒÎ·) - ÎœÎŸÎÎ™ÎœÎ— ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·
        function collapseSuperposition() {
            if (imageInterval) {
                clearInterval(imageInterval);
                imageInterval = null;
            }
            
            // Î¤Ï…Ï‡Î±Î¯Î± ÎµÏ€Î¹Î»Î¿Î³Î® Ï„ÎµÎ»Î¹ÎºÎ®Ï‚ ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚ (Î¼ÏŒÎ½Î¿ ÏƒÏ„Î·Î½ Ï€ÏÏÏ„Î· ÎºÎ±Ï„Î¬ÏÏÎµÏ…ÏƒÎ·)
            if (!finalStateDetermined) {
                catIsAlive = Math.random() < 0.5;
                if (catIsAlive) {
                    catImage.src = 'A-CAT.png';
                } else {
                    catImage.src = 'D-CAT.png';
                }
                finalStateDetermined = true;
            } else {
                // Î£Îµ ÎµÏ€ÏŒÎ¼ÎµÎ½ÎµÏ‚ Ï€Î±ÏÎ±Ï„Î·ÏÎ®ÏƒÎµÎ¹Ï‚, Î´Î¹Î±Ï„Î®ÏÎ·ÏƒÎ· Ï„Î·Ï‚ Î¯Î´Î¹Î±Ï‚ ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚
                if (catIsAlive) {
                    catImage.src = 'A-CAT.png';
                } else {
                    catImage.src = 'D-CAT.png';
                }
            }
            
            // ÎŸÏ€Ï„Î¹ÎºÎ® Î­Î½Î´ÎµÎ¹Î¾Î· Ï„ÎµÎ»Î¹ÎºÎ®Ï‚ ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚
            catImage.classList.add('final-state');
            
            superpositionActive = false;
            updateStatus(false);
            restartBtn.disabled = false;
        }

        // Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚
        function updateStatus(inSuperposition) {
            if (inSuperposition) {
                statusElement.textContent = 'ğŸ”¬ ÎšÎ’Î‘ÎÎ¤Î™ÎšÎ— Î¥Î Î•Î¡Î˜Î•Î£Î—: Î— Î³Î¬Ï„Î± ÎµÎ¯Î½Î±Î¹ Î–Î©ÎÎ¤Î‘ÎÎ— ÎºÎ±Î¹ ÎÎ•ÎšÎ¡Î— Ï„Î±Ï…Ï„ÏŒÏ‡ÏÎ¿Î½Î±!';
                statusElement.className = 'status superposition';
            } else {
                const state = catIsAlive ? 'Î–Î©ÎÎ¤Î‘ÎÎ—' : 'ÎÎ•ÎšÎ¡Î—';
                statusElement.textContent = `ğŸ” Î Î‘Î¡Î‘Î¤Î—Î¡Î—Î£Î—: Î— Î³Î¬Ï„Î± ÎµÎ¯Î½Î±Î¹ ${state}! (ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· ÎŸÏÎ¹ÏƒÏ„Î¹ÎºÎ¿Ï€Î¿Î¹Î·Î¼Î­Î½Î·)`;
                statusElement.className = 'status collapsed';
            }
        }

        // Î Î±ÏÎ±ÎºÎ¿Î»Î¿ÏÎ¸Î·ÏƒÎ· Ï†Ï‰Ï„ÏŒÏ‚
        function startLightMonitoring() {
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');

            function checkLight() {
                if (!isExperimentRunning) return;

                try {
                    canvas.width = 100;
                    canvas.height = 75;
                    context.drawImage(cameraVideo, 0, 0, canvas.width, canvas.height);
                    
                    const imageData = context.getImageData(0, 0, canvas.width, canvas.height);
                    const data = imageData.data;
                    
                    let totalBrightness = 0;
                    let sampleCount = 0;
                    
                    for (let i = 0; i < data.length; i += 16) {
                        const brightness = (data[i] + data[i + 1] + data[i + 2]) / 3;
                        totalBrightness += brightness;
                        sampleCount++;
                    }
                    
                    const averageBrightness = totalBrightness / sampleCount;
                    const lightPercentage = Math.min(100, Math.round((averageBrightness / 255) * 100));
                    
                    // Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· Î¿Î¸ÏŒÎ½Î·Ï‚
                    lightValue.textContent = lightPercentage;
                    lightProgress.style.width = lightPercentage + '%';
                    
                    // Î Î¿Î»Ï Ï‡Î±Î¼Î·Î»ÏŒ threshold
                    const lightDetected = lightPercentage > 15;
                    
                    // Î›Î¿Î³Î¹ÎºÎ® ÎµÎ»Î­Î³Ï‡Î¿Ï…
                    if (lightDetected && superpositionActive) {
                        // Î ÏÏÏ„Î· Ï€Î±ÏÎ±Ï„Î®ÏÎ·ÏƒÎ· - ÎºÎ±Ï„Î¬ÏÏÎµÏ…ÏƒÎ· Ï…Ï€Î­ÏÎ¸ÎµÏƒÎ·Ï‚
                        collapseSuperposition();
                    } else if (!lightDetected && superpositionActive) {
                        // Î£ÎºÎ¿Ï„Î¬Î´Î¹ - ÏƒÏ…Î½Î­Ï‡Î¹ÏƒÎ· Ï…Ï€Î­ÏÎ¸ÎµÏƒÎ·Ï‚
                        // Î”ÎµÎ½ ÎºÎ¬Î½Î¿Ï…Î¼Îµ Ï„Î¯Ï€Î¿Ï„Î±, Î· Ï…Ï€Î­ÏÎ¸ÎµÏƒÎ· ÏƒÏ…Î½ÎµÏ‡Î¯Î¶ÎµÏ„Î±Î¹
                    } else if (!lightDetected && !superpositionActive && !finalStateDetermined) {
                        // Î£Ï€Î¬Î½Î¹Î± Ï€ÎµÏÎ¯Ï€Ï„Ï‰ÏƒÎ· - ÎµÏ€Î¹ÏƒÏ„ÏÎ¿Ï†Î® ÏƒÎµ Ï…Ï€Î­ÏÎ¸ÎµÏƒÎ· Î¼ÏŒÎ½Î¿ Î±Î½ Î´ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„Î¹ÎºÎ¿Ï€Î¿Î¹Î·Î¸ÎµÎ¯
                        startSuperposition();
                    }
                    // Î‘Î½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„Î¹ÎºÎ¿Ï€Î¿Î¹Î·Î¸ÎµÎ¯ Î· ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·, Ï€Î±ÏÎ±Î¼Î­Î½ÎµÎ¹ Ï‰Ï‚ Î­Ï‡ÎµÎ¹
                    
                    // Î‘Î½Î±Î½Î­Ï‰ÏƒÎ·
                    setTimeout(checkLight, 300);
                    
                } catch (e) {
                    setTimeout(checkLight, 500);
                }
            }
            
            setTimeout(checkLight, 1000);
        }

        // Î•Ï€Î±Î½ÎµÎºÎºÎ¯Î½Î·ÏƒÎ· Ï€ÎµÎ¹ÏÎ¬Î¼Î±Ï„Î¿Ï‚ (Î½Î­Î± Î³Î¬Ï„Î±)
        function restartExperiment() {
            if (isExperimentRunning) {
                finalStateDetermined = false;
                superpositionActive = false;
                startSuperposition();
            }
        }

        // ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚
        window.addEventListener('beforeunload', () => {
            if (cameraStream) {
                cameraStream.getTracks().forEach(track => track.stop());
            }
            if (imageInterval) {
                clearInterval(imageInterval);
            }
        });
    </script>
</body>
</html>